var dataSDK=function(){function e(e,t){for(var n={},i=0;i<t.length;i++){var o=new RegExp("(^|&)"+t[i]+"=([^&]*)(&|$)"),r=e.match(o),a="";null!=r&&(a=decodeURIComponent(r[2])),n[t[i]]=a}return n}function t(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.src=e;try{var n=document.getElementsByTagName("script").fiboDataSDK;n.parentNode.insertBefore(t,n)}catch(i){console.log("引用斐波SDK的script标签id必须为fiboDataSDK")}}function n(e,n){var r=I;r=i(r,"appId",T.pfid),r=i(r,"pageId",T.appid),"true"===T.debug&&(r=i(r,"debug","true")),r=i(r,"sui",y.sui),r=i(r,"cnl",y.cnl);var a={eventType:e,eventTime:(new Date).getTime()};o(n)&&(a.eventArgs=n),w.push(a),r=i(r,"rpEventList",JSON.stringify(w)),r=i(r,"referrer",encodeURIComponent(document.referrer));var s=b.get("rp");null==s&&(s=""),r=i(r,"rp",s);var c=b.get("ext");if(null==c&&(c=""),r=i(r,"ext",c),r=i(r,"url",encodeURIComponent(location.href)),"unload"===e||"exit"===e){var d=new Image;return d.src=r,void(w=[])}r=i(r,"callback","dataSDK.logCb"),t(r),w=[]}function i(e,t,n){return void 0!=n&&null!=n||(n=""),-1!=e.indexOf("?")||-1!=e.indexOf("=")?e+"&"+t+"="+n:e+"?"+t+"="+n}function o(e){return null===e||"object"!=typeof e?!1:!Object.keys||0!==Object.keys(e).length}function r(){var e,t=8,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[],o=n.length;for(e=0;t>e;e++)i[e]=n[0|Math.random()*o];return i.join("")}function a(e){o(e)&&n("userinfo",e)}function s(e,t){return void 0===t&&(t="1"),e.data?void n("formInfo",{formInfo:e}):void(o(e)&&n("formInfo",{formInfo:{data:e,version:t}}))}function c(e){if(o(e)){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;e.idno&&t.test(e.idno)&&(e.idno=""),e.gender&&/^(0|1|2)$/.test(e.gender)&&(e.gender="0"),n("idInfo",{name:e.name,phone:e.phone,addr:e.addr,idno:e.idno,gender:e.gender})}}function d(e){var t=/^[1][34578]\d{9}$/;if("string"==typeof e||t.test(e)){var i={phone:e};n("setphone",i)}}function l(e){var t=e||location.href;try{var n="";if(-1!=t.indexOf("#")){var o=t.split("#");n=o[1],t=o[0]}var a=y.lc,s="",c=y.cnl;return a=""===a?1:parseInt(a,10)+1,(isNaN(a)||0===a)&&(a=1),s=b.get("rp"),null===s&&(s=r(),b.add("rp",s,1e4)),t=-1!=t.indexOf("lc=")?t.replace(/lc=\d{1,5}/,"lc="+a):i(t,"lc",a),t=-1!=t.indexOf("sui=")?t.replace(/sui=[a-zA-Z0-9]{8}/,"sui="+s):i(t,"sui",s),""!==c&&-1===t.indexOf("cnl=")&&(t=i(t,"cnl",c)),""!=n&&(t+="#"+n),t}catch(d){return e}}function u(e){var t=(new Date).getTime()-x,i={staytm:t,useragent:R.device};/^(timeline|friend|qq|txweibo|qzone)$/.test(e)&&(i.shareType=e),n("share",i)}function g(e,t,i){if(!(isNaN(e)||isNaN(t)||isNaN(i)||0>=e||0>=t||0>=i||e>i||t>i||e==t)){var o=(new Date).getTime(),r=o-x;if(x=o,!(0>r)){var a={ctp:e,tgp:t,ttp:i,staytm:r};n("switchpage",a)}}}function p(e){var t={};void 0===e||isNaN(e)||0>e||(t={currentPage:e}),n("exit",t)}function f(e,t){var i=e.replace(/[#&]/g,"_"),o=t.replace(/[#&]/g,"_");if(n("linkclick",{btname:i,remark:o}),event&&"A"===event.target.tagName&&/^http/.test(event.target.href)){var r=event.target.href;event.preventDefault(),setTimeout(function(){location.href=r},200)}}function m(e){if(200===e.retCode){var t=e.rp,n=e.ext;""!==t&&"null"!==t&&b.add("rp",t,1e4),""!==n&&"null"!==n&&b.add("ext",n,1e4)}}function v(e){if(200===e.retCode){var t=e.rp,i=e.ext;if(""!==t&&"null"!==t&&b.add("rp",t,1e4),"true"!==T.blext)return void n("view",P);if(""===i||"null"===i||"undefined"===i||void 0===i){var o="http://col.fibodata.com/weixin/callback?surl="+encodeURIComponent(window.location.href),r=encodeURIComponent(o);return void(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx94ec6057d5a4a719&redirect_uri="+r+"&response_type=code&scope=snsapi_base&state=#wechat_redirect")}b.add("ext",i,1e4),n("view",P)}}function h(e){if("[object Array]"===toString.call(e)){var t=encodeURIComponent(e.toString());n("tag",{tags:t})}}var w=[],x=0,S=(new Date).getTime(),I="http://col.fibodata.com/logdataservlet",b={get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)")),n=window.localStorage||!1;return null!=t&&(t=t[2],n&&window.localStorage.setItem(e,t)),null===t&&n&&(t=window.localStorage.getItem(e),null!=t&&b.add(e,t,1e4)),t?decodeURIComponent(t):null},add:function(e,t,n){var i=e+"="+encodeURIComponent(t)+";";if(0!=n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i+="expires="+o.toGMTString()}i+=";path=/",document.cookie=i,window.localStorage&&window.localStorage.setItem(e,t)}},y=function(){var t=window.location.search.substr(1),n=["lc","sui","cnl","debug","from"],i=e(t,n);return i}(),T=function(){var t=document.getElementById("fiboDataSDK").src.split("?")[1],n=["pfid","appid","blext","debug","auth"];return e(t,n)}(),C=window.screen.width||0,N=window.screen.height||0,O=window.devicePixelRatio||0,R=function(){var e=window.navigator&&window.navigator.userAgent;if(!e)return{};var t=/MicroMessenger/i.test(e),n="";t&&(n="Weixin"),/Weibo/i.test(e)&&(n="Weibo"),/Qzone/i.test(e)&&(n="Qzone"),/QQ\/\d/i.test(e)&&(n="QQ"),/NewsArticle/i.test(e)&&(n="NewsArticle");var i="";if("Weixin"===n||"QQ"===n){var o=navigator.userAgent.match(/NetType\/[a-z0-9A-Z_]+/);null!==o&&(i=o[0].split("/")[1])}var r="pc";/iPhone/i.test(e)&&(r="iphone"),/(iPad|iPod)/i.test(e)&&(r="ipad"),/Android/i.test(e)&&(r="android"),/Windows Phone/i.test(e)&&(r="WP");var a,s,c="",d="";if("android"===r){try{a=/(Linux(.)*\) )/.exec(e)[0].split(";"),s=a[a.length-1],s=s.split(")")[0].substr(1),c=s,d=s}catch(l){}c=function(e){return/GT-|SM-|SCH-/gi.test(e)?"samsung":/HM|RedMi|Mi/gi.test(e)?"xiaomi":/huawei|honor/gi.test(e)?"Huawei":/vivo/gi.test(e)?"vivo":/Meitu/gi.test(e)?"Meitu":/OPPO|R6|R7|R8/gi.test(e)?"OPPO":/Coolpad|SK1/gi.test(e)?"Coolpad":/ASUS/gi.test(e)?"ASUS":/ZTE/gi.test(e)?"ZTE":/HTC/gi.test(e)?"HTC":/Sony/gi.test(e)?"Sony":/Lenovo/gi.test(e)?"Lenovo":/NX5/gi.test(e)?"nubia":/m([0-9cx]{1,4})/gi.test(e)||/PRO 5/g.test(e)?"meizu":e}(c);var u,g=d.search("Build");-1!==g&&(u=d.substr(0,g)),u&&(u=u.replace(/^[\s\t ]+|[\s\t ]+$/g,""),c===d&&(c=u))}else"iphone"===r&&(c="iphoneOther",320===C&&(480===N&&(c=2===O?"iphone4x":"iphoneOther"),568===N&&(c="iphone5x")),375===C&&(c="iphone6x"),414===C&&(c="iphone6xp"));return{isWeixin:t,appSrc:n,netType:i,device:r,model:c,mdetail:u||""}}(),D=Math.max(C,N)*O<=2560?(window.screen.width||0)*(window.devicePixelRatio||0)+"x"+(window.screen.height||0)*(window.devicePixelRatio||0):(window.screen.width||0)+"x"+(window.screen.height||0);sessionStorage?""!==y.lc||""!==y.cnl||""!==y.sui?(sessionStorage.setItem("lc",y.lc),sessionStorage.setItem("sui",y.sui),sessionStorage.setItem("cnl",y.cnl),sessionStorage.setItem("from",y.from)):(y.lc=sessionStorage.getItem("lc")||"",y.sui=sessionStorage.getItem("sui")||"",y.cnl=sessionStorage.getItem("cnl")||"",y.from=sessionStorage.getItem("from")||""):""!==y.lc||""!==y.cnl?(b.add("lc",y.lc),b.add("sui",y.sui),b.add("cnl",y.cnl),b.add("from",y.from)):(y.lc=b.get("lc")||"",y.sui=b.get("sui")||"",y.cnl=b.get("cnl")||"",y.from=b.get("from")||""),"null"===y.lc&&(y.lc=""),"null"===y.cnl&&(y.cnl=""),"null"===y.sui&&(y.sui=""),y.cnl.length>20&&(y.cnl=y.cnl.substr(0,20));var P={isWeixin:R.isWeixin,useragent:R.device,lc:parseInt(y.lc,10)||0,shareType:y.from,netType:R.netType,appSrc:R.appSrc,screen:D,model:R.model,mdetail:R.mdetail};"groupmessage"!==P.shareType&&"singlemessage"!==P.shareType&&"timeline"!==P.shareType&&(P.shareType="");var A="true"===T.auth;R.isWeixin&&A&&""===P.shareType&&(P.shareType="gzh");var U=document.referrer;return-1==U.indexOf("mp.weixin.qq.com")&&-1==U.indexOf("mp.weixinbridge.com")||(P.shareType="gzh"),x=(new Date).getTime(),n("view",P),window.addEventListener&&window.addEventListener("unload",function(){n("unload",{staytm:(new Date).getTime()-S})},!1),{pushUserInfo:a,saveFormInfo:s,dealUrl:l,preShareUrl:l,share:u,switchPage:g,exitPage:p,btnClick:f,saveCellPhone:d,pushTags:h,logCb:m,checkIdCb:v,pushIdentity:c}}();